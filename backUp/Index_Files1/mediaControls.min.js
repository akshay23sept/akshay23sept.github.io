define("mediaControls",["lodash","coreUtils","santa-components","componentsCore","prop-types","skins","santa-core-utils","warmupUtilsLib","svgShape"],function(e,t,o,i,r,s,n,a,l){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(i,r,function(t){return e[t]}.bind(null,r));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=917)}({0:function(t,o){t.exports=e},1:function(e,o){e.exports=t},10:function(e,t){e.exports=n},11:function(e,t){e.exports=a},131:function(e,t){e.exports=l},2:function(e,t){e.exports=o},258:function(e,t,o){var i,r;i=[o(2),o(4),o(0),o(3),o(11)],void 0===(r=function(e,t,o,i,r){"use strict";var s=r.mediaConsts;function n(e){return e===s.playbackTypes.PLAYING||e===s.playbackTypes.SEEK_PLAYING}return{displayName:"MediaControlPlay",mixins:[i.mixins.skinBasedComp,i.mixins.createChildComponentMixin],propTypes:{style:t.object,playerId:t.string.isRequired,svgPropsMapForMediaControls:t.object,playbackState:t.string,handleBehavior:e.santaTypesDefinitions.Behaviors.handleBehavior.isRequired},clickAction:function(){this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:n(this.props.playbackState)?"pause":"play"})},getIconComponent:function(e){var t=o.get(this.props.svgPropsMapForMediaControls,e),i=o.assign({id:"".concat(this.props.id,"icon"),key:e,ref:"icon",preserveViewBox:!0},t);return this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage","icon",i)},getSkinProperties:function(){return{"":{style:this.props.style},playButton:{onClick:this.clickAction},icon:this.getIconComponent((e=this.props.playbackState,o="play",e!==s.playbackTypes.PLAY_ENDED||t?n(e)&&(o="pause"):o="replay",o))};var e,t,o}}}.apply(t,i))||(e.exports=r)},259:function(e,t,o){var i,r;i=[o(2),o(4),o(0),o(3)],void 0===(r=function(e,t,o,i){"use strict";return{displayName:"MediaControlFullscreen",mixins:[i.mixins.skinBasedComp,i.mixins.createChildComponentMixin],propTypes:{style:t.object,playerId:t.string.isRequired,enableFullsceen:t.bool,svgPropsMapForMediaControls:t.object,fullscreen:t.bool,handleBehavior:e.santaTypesDefinitions.Behaviors.handleBehavior.isRequired},clickAction:function(){this.props.enableFullsceen&&this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:this.props.fullscreen?"exitFullscreen":"enterFullscreen"})},getIconComponent:function(e){var t=o.get(this.props.svgPropsMapForMediaControls,e),i=o.assign({id:"".concat(this.props.id,"icon"),key:e,ref:"icon",preserveViewBox:!0},t);return this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage","icon",i)},getSkinProperties:function(){return{"":{style:this.props.style},fullscreenButton:{className:this.classSet({"video-fullscreen":this.props.fullscreen,"video-windowed":!this.props.fullscreen,disabled:!this.props.enableFullsceen}),onClick:this.clickAction},icon:this.getIconComponent((e=this.props.fullscreen,e?"exitFullscreen":"fullscreen"))};var e}}}.apply(t,i))||(e.exports=r)},260:function(e,t,o){var i,r;i=[o(2),o(0),o(4),o(3),o(10)],void 0===(r=function(e,t,o,i,r){"use strict";var s=r.SimpleDrag;return{displayName:"MediaControlVolume",mixins:[i.mixins.skinBasedComp,i.mixins.createChildComponentMixin],propTypes:{style:o.object,playerId:o.string.isRequired,hasAudio:o.bool.isRequired,disableAudio:o.bool.isRequired,volume:o.number,muted:o.bool,svgPropsMapForMediaControls:o.object,handleBehavior:e.santaTypesDefinitions.Behaviors.handleBehavior.isRequired},getInitialState:function(){return this.isDragging=!1,{}},clickActionMute:function(){if(this.props.hasAudio){var e=this.props.muted?"unMute":"mute";this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:e})}},setVolumeOnSeek:function(e){this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:"setVolume",params:{volume:e.endX/e.maxX}})},onDragStart:function(e,t){this.isDragging=!0,this.refs.volumeBarActive.style.width="".concat(t.endX/t.maxX*100,"%"),this.setVolumeOnSeek(t)},onDrag:function(e,t){this.refs.volumeBarActive.style.width="".concat(t.endX/t.maxX*100,"%"),this.setVolumeOnSeek(t)},onDragEnd:function(e,t){this.isDragging=!1,this.setVolumeOnSeek(t)},volumeSeekStart:function(e){s({onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrag:this.onDrag,minX:0,maxX:e.target.offsetWidth,offsetX:e.clientX-e.currentTarget.getBoundingClientRect().left}).start(e)},getIconComponent:function(e){var o=t.get(this.props.svgPropsMapForMediaControls,e),i=t.assign({id:"".concat(this.props.id,"icon"),key:e,ref:"icon",preserveViewBox:!0},o);return this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage","icon",i)},getSkinProperties:function(){var e,o,i,r=(e=this.props.muted,o=this.props.hasAudio,i=this.props.disableAudio,!o||i?"":e?"volumeOff":"volumeOn"),s={"":{style:this.props.style},volume:{className:this.classSet({muted:this.props.muted,disabled:!this.props.hasAudio||this.props.disableAudio})},mute:{onClick:this.clickActionMute},icon:r?this.getIconComponent(r):null,volumeBarActive:{style:{width:"".concat(100*this.props.volume,"%")}}};return this.props.muted||t.assign(s,{volumeBarDragArea:{onMouseDown:this.volumeSeekStart}}),s}}}.apply(t,i))||(e.exports=r)},261:function(e,t,o){var i,r;i=[o(2),o(0),o(4),o(3),o(10),o(262)],void 0===(r=function(e,t,o,i,r,s){"use strict";var n=r.mediaConsts,a=r.SimpleDrag;return{displayName:"MediaControlProgress",mixins:[i.mixins.skinBasedComp,i.mixins.createChildComponentMixin],propTypes:t.defaults({style:o.object,playerId:o.string.isRequired,mediaAspect:e.santaTypesDefinitions.SiteAspects.mediaAspect.isRequired,handleBehavior:e.santaTypesDefinitions.Behaviors.handleBehavior.isRequired,serviceTopologyStaticVideoUrl:e.santaTypesDefinitions.ServiceTopology.staticVideoUrl,showStoryboard:o.string,storyboardUrl:o.string,videoAspectRatio:o.number,svgPropsMapForMediaControls:o.object},e.utils.santaTypesUtils.getSantaTypesByDefinition(s)),getInitialState:function(){return this.isDragging=!1,this.setStoryboardState=null,this.lastPlayheadPosition=0,{playbackState:n.playbackTypes.WAITING,currentTime:0,progress:0,duration:0,isStoryboardVisible:!1,storyboardPlaybackError:!1}},getDefaultProps:function(){return{showVideoInStoryboard:!0,showProgressBuffer:!1}},componentDidMount:function(){this.props.mediaAspect.registerStateChange(this.props.id,this.props.playerId,this.setState.bind(this))},componentWillUnmount:function(){this.props.mediaAspect.unregisterStateChange(this.props.id,this.props.playerId)},componentWillUpdate:function(e,t){"idle"===t.storyboardReadyState&&this.state.storyboardPlaybackError&&this.setState({storyboardPlaybackError:!1})},onSeekStart:function(e,t){this.isDragging=!0,this.lastPlayheadPosition="".concat(t.endX/t.maxX*100,"%"),this.refs.playhead.style.left=this.lastPlayheadPosition,this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:"seekStart"})},onSeekEnd:function(e,t){var o=t.endX/t.maxX*this.state.duration;this.props.handleBehavior({type:"comp",targetId:this.props.playerId,name:"seekEnd",params:{time:o}}),this.isDragging=!1},onSeek:function(e,t){this.lastPlayheadPosition="".concat(t.endX/t.maxX*100,"%"),this.refs.playhead.style.left=this.lastPlayheadPosition},seekStartDrag:function(e){this.isDragging||a({onDragStart:this.onSeekStart,onDragEnd:this.onSeekEnd,onDrag:this.onSeek,minX:0,maxX:e.target.offsetWidth,offsetX:e.nativeEvent.offsetX}).start(e)},getStoryboardComp:function(){var e=this.props.showStoryboard;if(!e||"none"===e)return null;var t="videoAndTime"===e&&this.props.storyboardUrl&&!this.state.storyboardPlaybackError,o=t?"storyboard":"".concat("storyboard","Minimal"),i=this.getStoryboardProps("storyboard",t);return this.createChildComponent(null,"wysiwyg.viewer.components.MediaControlStoryboard",o,i)},setStoryboardStateCallback:function(e){this.setStoryboardState=e},getStoryboardProps:function(e,t){var o={ref:e,id:this.props.id+e,svgPropsMapForMediaControls:this.props.svgPropsMapForMediaControls,hidden:!this.state.isStoryboardVisible,setStateCallback:this.setStoryboardStateCallback};return t&&(o.videoAspectRatio=this.props.videoAspectRatio,o.storyboardUrl=this.props.serviceTopologyStaticVideoUrl+this.props.storyboardUrl,o.showVideo=!0,o.playbackErrorCallback=this.handleStoryboardError),o},handleStoryboardError:function(){this.setState({storyboardPlaybackError:!0})},onStoryboardStart:function(){this.setState({isStoryboardVisible:!0})},onStoryboardEnd:function(){this.setState({isStoryboardVisible:!1})},onStoryboardScrub:function(e,t){this.setStoryboardState&&this.props.showStoryboard&&"none"!==this.props.showStoryboard&&this.setStoryboardState({left:t.endX,time:t.endX/t.maxX*this.state.duration}),this.refs.playheadGhost.style.left="".concat(t.endX,"px")},storyboardStartScrub:function(e){a({onDragStart:this.onStoryboardStart,onDragEnd:this.onStoryboardEnd,onDrag:this.onStoryboardScrub,minX:0,maxX:e.target.offsetWidth,offsetX:e.clientX-e.currentTarget.getBoundingClientRect().left}).start(e)},getPlayHeadPosition:function(e){var o;return!(this.isDragging||(o=this.state.playbackState,t.includes([n.playbackTypes.SEEK_PLAYING,n.playbackTypes.SEEK_PAUSED,n.playbackTypes.SEEKING],o)))?"".concat(this.state.currentTime/this.state.duration*100,"%"):e},getProgressPlaySize:function(e){return!this.isDragging?e:"".concat(this.state.currentTime/this.state.duration*100,"%")},getIconComponent:function(e){var o=t.get(this.props.svgPropsMapForMediaControls,e),i="".concat(e,"Icon"),r=t.assign({id:this.props.id+i,key:e,ref:i,preserveViewBox:!0},o);return this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage",i,r)},getProgressLoad:function(e,t){return t.showProgressBuffer?{progressLoad:{style:{width:"".concat(e.progress/e.duration*100,"%")}}}:null},getSkinProperties:function(){this.lastPlayheadPosition=this.getPlayHeadPosition(this.lastPlayheadPosition);var e={"":{style:this.props.style},progressDragArea:{onMouseDown:this.seekStartDrag,onMouseEnter:this.storyboardStartScrub},progressPlay:{style:{width:this.getProgressPlaySize(this.lastPlayheadPosition)}},playhead:{style:{left:this.lastPlayheadPosition}},playheadGhost:{hidden:!this.state.isStoryboardVisible},playheadIcon:this.getIconComponent("playhead"),playheadGhostIcon:this.getIconComponent("playheadGhost"),storyboard:this.getStoryboardComp()};return t.assign(e,this.getProgressLoad(this.state,this.props)),e}}}.apply(t,i))||(e.exports=r)},262:function(e,t,o){var i,r;i=[o(0),o(4),o(3),o(263)],void 0===(r=function(e,t,o,i){"use strict";var r=i.getReadableTime;return{displayName:"MediaControlStoryboard",mixins:[o.mixins.skinBasedComp,o.mixins.createChildComponentMixin],propTypes:{style:t.object,svgPropsMapForMediaControls:t.object.isRequired,hidden:t.bool,showVideo:t.bool,setStateCallback:t.func.isRequired,storyboardUrl:t.string,videoAspectRatio:t.number,playbackErrorCallback:t.func},getInitialState:function(){return{time:0,left:0}},getDefaultProps:function(){return{playbackErrorCallback:e.noop}},componentDidMount:function(){this.props.setStateCallback(this.setState.bind(this))},componentWillUnmount:function(){this.props.setStateCallback(null)},componentDidUpdate:function(e,t){if(this.props.showVideo){this.refs.mediaSource&&this.refs.mediaSource.addEventListener("error",this.handlePlaybackError,!0);var o=this.refs.video;this.props.storyboardUrl!==o.currentSrc&&o.load(),o&&t.time!==this.state.time&&(o.currentTime=this.state.time)}},handlePlaybackError:function(){this.props.playbackErrorCallback()},getPreviewDimensions:function(e){return{width:Math.round(58*e)+4,height:62}},getIconComponent:function(t){var o=e.get(this.props.svgPropsMapForMediaControls,t),i=e.assign({id:"".concat(this.props.id,"icon"),key:t,ref:"icon",preserveViewBox:!0},o);return o?this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage","icon",i):null},getSkinProperties:function(){var t={left:this.state.left,visibility:this.props.hidden?"hidden":"visible"},o=this.getPreviewDimensions(this.props.videoAspectRatio);return this.props.showVideo?(t.top=-58,{"":{style:e.defaults(t,o,this.props.style)},video:{onError:this.handlePlaybackError},mediaSource:{src:this.props.storyboardUrl,onError:this.handlePlaybackError},label:{children:[r(this.state.time)]}}):{"":{style:t},icon:this.getIconComponent("storyboardTime"),label:{children:[r(this.state.time,3599)]}}}}}.apply(t,i))||(e.exports=r)},263:function(e,t,o){var i;void 0===(i=function(){"use strict";return{getReadableTime:function(e,t){t&&(e%=t);var o=new Date(1e3*e),i=o.getUTCHours(),r=o.getUTCMinutes(),s=o.getUTCSeconds();return s<10&&(s="0".concat(s)),i?(r<10&&(r="0".concat(r)),"".concat(i,":").concat(r,":").concat(s)):"".concat(r,":").concat(s)}}}.apply(t,[]))||(e.exports=i)},264:function(e,t,o){var i,r;i=[o(2),o(4),o(3),o(263)],void 0===(r=function(e,t,o,i){"use strict";var r=i.getReadableTime;return{displayName:"MediaControlTime",mixins:[o.mixins.skinBasedComp],propTypes:{style:t.object,playerId:t.string.isRequired,mediaAspect:e.santaTypesDefinitions.SiteAspects.mediaAspect.isRequired},getInitialState:function(){return{currentTime:0,duration:0}},componentDidMount:function(){this.props.mediaAspect.registerStateChange(this.props.id,this.props.playerId,this.setState.bind(this))},componentWillUnmount:function(){this.props.mediaAspect.unregisterStateChange(this.props.id,this.props.playerId)},getSkinProperties:function(){return{"":{style:this.props.style},played:{children:[r(this.state.currentTime)]},total:{children:[r(this.state.duration)]}}}}}.apply(t,i))||(e.exports=r)},3:function(e,t){e.exports=i},4:function(e,t){e.exports=r},5:function(e,t){e.exports=s},917:function(e,t,o){var i,r;i=[o(3),o(918),o(919),o(258),o(259),o(260),o(261),o(264),o(262),o(5),o(920),o(921)],void 0===(r=function(e,t,o,i,r,s,n,a,l,p,c){"use strict";var d={mediaOverlayControls:t,mediaControls:o,mediaControlPlay:i,mediaControlFullscreen:r,mediaControlVolume:s,mediaControlProgress:n,mediaControlTime:a,mediaControlStoryboard:l};return e.compRegistrar.register("wysiwyg.viewer.components.MediaOverlayControls",d.mediaOverlayControls).register("wysiwyg.viewer.components.MediaControls",d.mediaControls).register("wysiwyg.viewer.components.MediaControlPlay",d.mediaControlPlay).register("wysiwyg.viewer.components.MediaControlFullscreen",d.mediaControlFullscreen).register("wysiwyg.viewer.components.MediaControlVolume",d.mediaControlVolume).register("wysiwyg.viewer.components.MediaControlProgress",d.mediaControlProgress).register("wysiwyg.viewer.components.MediaControlTime",d.mediaControlTime).register("wysiwyg.viewer.components.MediaControlStoryboard",d.mediaControlStoryboard),p.skinsMap.addBatch(c),d}.apply(t,i))||(e.exports=r)},918:function(e,t,o){var i,r;function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}i=[o(0),o(4),o(3),o(11),o(2),o(131)],void 0===(r=function(e,t,o,i,r,n){"use strict";var a,l=i.mediaConsts,p=(s(a={},l.playbackTypes.IDLE,!0),s(a,l.playbackTypes.PAUSED,!0),s(a,l.playbackTypes.READY,!0),s(a,l.playbackTypes.STOPPING,!0),s(a,l.playbackTypes.PLAY_ENDED,!0),a),c={duration:.5,to:{autoAlpha:.99}},d={duration:.3,to:{opacity:0}},u={duration:.25,scale:1.07},h={duration:.15,scale:1};function m(e,t,o){if(o&&e===l.playbackTypes.PLAY_ENDED)return!1;var i=!e||e===l.playbackTypes.WAITING,r=e===l.playbackTypes.PLAYING&&!t;return!(i||r)}return{displayName:"MediaOverlayControls",mixins:[o.mixins.skinBasedComp,r.mixins.animationsMixin,o.mixins.createChildComponentMixin],propTypes:e.defaults({compProp:r.santaTypesDefinitions.Component.compProp,playbackState:r.santaTypesDefinitions.Media.playbackState,handleBehavior:r.santaTypesDefinitions.Behaviors.handleBehavior.isRequired,svgPropsMapForMediaControls:r.santaTypesDefinitions.VectorImage.svgPropsMapForMediaControls,controlsData:r.santaTypesDefinitions.Media.controlsData,isResponsive:r.santaTypesDefinitions.RendererModel.isResponsive,getIsPlaybackPlayIntent:r.santaTypesDefinitions.Media.getIsPlaybackPlayIntent,componentViewMode:r.santaTypesDefinitions.RenderFlags.componentViewMode,interactionsNotificationRegistrar:t.func},r.utils.santaTypesUtils.getSantaTypesByDefinition(n.vectorImage)),componentDidMount:function(){this.props.interactionsNotificationRegistrar(this.handleUserInteraction)},getInitialState:function(){return{showReplay:!1,showPlay:!1,showPauseIndicator:!1,showPlayIndicator:!1}},handleUserInteraction:function(e){"isHover"in e&&this.setState({playerInHoverState:e.isHover})},setStateAndRelayout:function(e){this.setState(e),this.registerReLayout()},componentWillReceiveProps:function(e){if(void 0!==e.playbackState){var t=e.playbackState,o=e.controlsData,i=!1===e.controlsData.allowReplay,r=this.hasIconData("playButton");m(t,o.canPause,i)&&r?this.onMediaStateChanged(e.playbackState):this.setState({showPlay:!1,showReplay:!1,showPauseIndicator:!1,showPlayIndicator:!1})}},componentDidUpdate:function(e,t){var o=this.state.showPlay!==t.showPlay;if((this.state.showPlay||this.state.showReplay)&&this.state.playerInHoverState!==t.playerInHoverState){var i=this.state.playerInHoverState?u:h,r=i.scale,s=i.duration;this.animate("indicator","BaseScale",s,0,{to:{scale:r},ease:"Sine.easeOut"})}if(o){var n=this.state.showPlay?c:d,a=n.to,l=n.duration;this.animate("indicator","BaseFade",l,0,{to:a,ease:"Sine.easeIn"})}},onMediaStateChanged:function(t){var o={};"editor"===this.props.componentViewMode||this.shouldShowBigPlay(t)?o.showPlay=!0:this.shouldHideBigPlay(t)&&(o.showPlay=!1),e.isEmpty(o)||this.setStateAndRelayout(o)},shouldHideBigPlay:function(e){return this.state.showPlay&&!p[e]},shouldShowBigPlay:function(e){var t=this.props.controlsData.playerInHoverInteraction,o=this.shouldDisableOnLastFrame(e);return!this.state.showPlay&&!t&&!o&&p[e]&&!this.props.getIsPlaybackPlayIntent()},shouldDisableOnLastFrame:function(e){return!1===this.props.controlsData.allowReplay&&e===l.playbackTypes.PLAY_ENDED},clickAction:function(){var t=this.props.playbackState===l.playbackTypes.PLAYING,o={};this.hasIconData("playIndication")&&this.hasIconData("pauseIndication")&&!this.state.showPlay&&!this.state.showReplay?(o.showPauseIndicator=t,o.showPlayIndicator=!t):(o.showPauseIndicator=!1,o.showPlayIndicator=!1),e.isEmpty(o)||this.setStateAndRelayout(o)},getIconSymbolName:function(){return"playButton"},hasIconData:function(t){return e.has(this.props.svgPropsMapForMediaControls,t)},getIconComponent:function(t){var o=e.get(this.props.svgPropsMapForMediaControls,t),i=e.assign({id:"".concat(this.props.id,"indicator"),key:t,ref:"indicator",className:this.classSet({indicator:!0,hover:this.props.playerInHoverState})},o);return this.createChildComponent(null,"wysiwyg.viewer.components.VectorImage","indicator",i)},getCatcherProperties:function(){var t=!1===this.props.controlsData.allowReplay;return e.assign({className:this.classSet({"interactive-player":m(this.props.playbackState,this.props.controlsData.canPause,t)}),onClick:this.clickAction},this.props.isResponsive&&{onClick:e.noop,style:{pointerEvents:"none"}})},getSkinProperties:function(){var e=this.getIconSymbolName(),t=e?this.getIconComponent(e):null,o=this.getCatcherProperties();return{"":{"data-player-id":this.props.compProp.playerId,style:this.props.style},indicator:t,catcher:o}}}}.apply(t,i))||(e.exports=r)},919:function(e,t,o){var i,r;function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}i=[o(4),o(0),o(3),o(2),o(11),o(10),o(258),o(259),o(260),o(261),o(264)],void 0===(r=function(e,t,o,i,r,n,a,l,p,c,d){"use strict";var u,h=n.timersMixins.timeoutsMixin,m=r.mediaConsts,y=(s(u={},m.playbackTypes.WAITING,!0),s(u,m.playbackTypes.LOADING,!0),s(u,m.playbackTypes.READY,!0),s(u,m.playbackTypes.IDLE,!0),u),g={duration:.35,delay:.2,params:{autoAlpha:1,ease:"Sine.easeOut"}},v={duration:.2,delay:.2,params:{opacity:0,ease:"Sine.easeIn"}},f={play:{componentName:"wysiwyg.viewer.components.MediaControlPlay"},volume:{componentName:"wysiwyg.viewer.components.MediaControlVolume"},fullscreen:{componentName:"wysiwyg.viewer.components.MediaControlFullscreen"},progress:{componentName:"wysiwyg.viewer.components.MediaControlProgress"},time:{componentName:"wysiwyg.viewer.components.MediaControlTime"}};return{displayName:"MediaControls",mixins:[o.mixins.skinBasedComp,i.mixins.animationsMixin,h,o.mixins.createChildComponentMixin],propTypes:t.defaults({id:i.santaTypesDefinitions.Component.id.isRequired,mediaAspect:i.santaTypesDefinitions.SiteAspects.mediaAspect.isRequired,svgPropsMapForMediaControls:i.santaTypesDefinitions.VectorImage.svgPropsMapForMediaControls,compProp:i.santaTypesDefinitions.Component.compProp,compDesign:i.santaTypesDefinitions.Component.compDesign,playbackState:i.santaTypesDefinitions.Media.playbackState,fullscreen:i.santaTypesDefinitions.Media.fullscreen,volume:i.santaTypesDefinitions.Media.volume,muted:i.santaTypesDefinitions.Media.muted,controlsData:i.santaTypesDefinitions.Media.controlsData,componentViewMode:i.santaTypesDefinitions.RenderFlags.componentViewMode.isRequired,isMobileDevice:i.santaTypesDefinitions.Device.isMobileDevice.isRequired,isMobileView:i.santaTypesDefinitions.isMobileView.isRequired,enableFullsceen:e.bool,interactionsNotificationRegistrar:e.func},i.utils.santaTypesUtils.getSantaTypesByDefinition(a),i.utils.santaTypesUtils.getSantaTypesByDefinition(l),i.utils.santaTypesUtils.getSantaTypesByDefinition(p),i.utils.santaTypesUtils.getSantaTypesByDefinition(c),i.utils.santaTypesUtils.getSantaTypesByDefinition(d)),getDefaultProps:function(){return{enableFullsceen:!1}},getInitialState:function(){return{isHover:!1,isInHoverState:!1}},componentDidMount:function(){this.props.interactionsNotificationRegistrar(this.handleUserInteraction)},componentDidUpdate:function(e,t){var o=this.props.playbackState&&"preview"!==this.props.componentViewMode&&this.props.playbackState!==m.playbackTypes.PLAYING,i=this.props.playbackState&&!y[this.props.playbackState]&&this.state.isInHoverState&&this.state.isHover,r=this.props.playbackState!==e.playbackState,s=this.state.isInHoverState!==t.isInHoverState,n=this.props.componentViewMode!==e.componentViewMode;if(s||r||n){var a=o||i?g:v,l=a.duration,p=a.delay,c=a.params;this.animate("controls","BaseFade",l,p,c)}},handleUserInteraction:function(e){e.mouseMove&&this.setTimedHover(),"isHover"in e&&this.state.isHover!==e.isHover&&this.setState({isHover:e.isHover})},getProgressProps:function(e,o){var i={showStoryboard:this.props.compProp.showStoryboard};return t.assign(i,{storyboardUrl:e,videoAspectRatio:o})},getControl:function(e,o){var i=f[e].componentName,r=e,s=t.assign({ref:e,skinPart:e,id:this.props.id+e,playerId:this.props.compProp.playerId,svgPropsMapForMediaControls:this.props.svgPropsMapForMediaControls,style:{height:"100%"},className:this.classSet({control:!0})},o);return this.createChildComponent(null,i,r,s)},isMobile:function(){return this.props.isMobileView||this.props.isMobileDevice},setTimedHover:function(){this.state.isInHoverState||this.setState({isInHoverState:!0}),this.setTimeout(this.removeTimedHover,this.isMobile()?4e3:2e3)},removeTimedHover:function(){this.setState({isInHoverState:!1})},getSkinProperties:function(){var e=this.getSkinExports(),t=e.play,o=e.volume,i=e.fullscreen,r=e.progress,s=e.time,n=this.props.controlsData,a=n.hasAudio,l=void 0===a||a,p=n.disableAudio,c=void 0!==p&&p,d=n.storyboardUrl,u=n.videoAspectRatio,h=this.props,m=h.playbackState,y=h.fullscreen,g=h.volume,v=void 0===g?1:g,f=h.muted,b={style:{display:"none"}};return{"":{style:this.props.style,"data-player-id":this.props.compProp.playerId,"data-element-queries-def":"controls"},controls:{className:this.classSet({"has-audio":l&&!c,controls:!0}),onClick:function(e){e.stopPropagation()},onTouchEnd:function(e){e.stopPropagation()},style:{visibility:"hidden"}},play:t?this.getControl("play",{playbackState:m}):b,volume:o?this.getControl("volume",{hasAudio:l,disableAudio:c,volume:v,muted:f}):b,fullscreen:i&&this.props.enableFullsceen?this.getControl("fullscreen",{fullscreen:y}):b,progress:r?this.getControl("progress",this.getProgressProps(d,u)):b,time:s?this.getControl("time"):b}}}}.apply(t,i))||(e.exports=r)},920:function(e,t,o){var i,r,s;"undefined"!=typeof self&&self,r=[],void 0===(s="function"==typeof(i=function(){"use strict";var e={"skins.viewer.mediaControlFullscreenDefaultSkin":{react:[["div","fullscreenButton",["_fullscreen-button"],{},["div","icon",[],{}]]],exports:{icon:{skin:"skins.viewer.VectorImageSkin"}},css:{"%_fullscreen-button":"width:100%;height:100%;cursor:pointer;position:relative;","%_fullscreen-button > div":"width:100%;height:100%;"}},"skins.viewer.mediaControlPlayDefaultSkin":{react:[["div","playButton",["_play-button"],{},["div","icon",[],{}]]],exports:{icon:{skin:"skins.viewer.VectorImageSkin"}},css:{"%_play-button":"width:100%;height:100%;cursor:pointer;position:relative;","%_play-button > div":"width:100%;height:100%;"}},"skins.viewer.mediaControlProgressDefaultSkin":{react:[["div","progressBar",[],{},["div",null,["_progress-indicator"],{},["div","progressIdle",["_progress-part","_progress-background"],{}],["div","progressLoad",["_progress-part","_progress-load"],{}],["div","progressPlay",["_progress-part","_progress-play"],{}],["div","playhead",["_progress-part","_play-head"],{},["div","playheadIcon",[],{}]],["div","playheadGhost",["_progress-part","_play-head-ghost"],{},["div","playheadGhostIcon",[],{}]],["div","progressDragArea",["_progress-part","_progress-drag-area"],{}]],["div","storyboard",[],{}]]],exports:{playheadIcon:{skin:"skins.viewer.VectorImageSkin"},playheadGhostIcon:{skin:"skins.viewer.VectorImageSkin"},storyboard:{skin:"skins.viewer.mediaControlStoryboardDefaultSkin"},storyboardMinimal:{skin:"skins.viewer.mediaControlStoryboardMinimalSkin"}},params:{maincolor:"COLOR",buffercolor:"COLOR",progresscolor:"COLOR"},paramsDefaults:{maincolor:"#fff",buffercolor:"#f80",progresscolor:"#f00"},css:{"%progressBar":"height:100%;position:relative;","%progressBar [hidden]":"display:none;","%progressBar %_progress-indicator":"top:50%;width:100%;position:relative;","%progressBar %_progress-part":"height:2px;margin-top:-1px;position:absolute;left:0;","%progressBar %_progress-background":"width:100%;background:[maincolor];border-radius:1px;box-shadow:0 1px 3px 0 rgba(0, 0, 0, 0.3);","%progressBar %_progress-load":"width:0;background:[buffercolor];border-radius:1px;","%progressBar %_progress-play":"width:0;background:[progresscolor];border-radius:1px;","%progressBar %_play-head,%progressBar %_play-head-ghost":"pointer-events:none;height:16px;width:16px;margin:-8px 0 0 -8px;left:0;","%progressBar %_play-head > div,%progressBar %_play-head-ghost > div":"width:100%;height:100%;","%progressBar %_progress-drag-area":"width:100%;height:24px;margin-top:-12px;cursor:pointer;"}},"skins.viewer.mediaControlsDarkSkin":{react:[["div","controls",["_controls"],{},["div","play",["_control"],{}],["div","time",["_control"],{}],["div","progress",["_control"],{}],["div","volume",["_control"],{}],["div","fullscreen",["_control"],{}]]],exports:{play:{skin:"skins.viewer.mediaControlPlayDefaultSkin"},volume:{skin:"skins.viewer.mediaControlVolumeDefaultSkin"},fullscreen:{skin:"skins.viewer.mediaControlFullscreenDefaultSkin"},progress:{skin:"skins.viewer.mediaControlProgressDefaultSkin"},time:{skin:"skins.viewer.mediaControlTimeDefaultSkin"}},css:{"%_controls":"width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;","%_controls %_control:first-child":"margin-left:21px;","%_controls %_control:last-child":"margin-right:20px;","%_controls %play":"width:24px;min-width:24px;margin-right:14px;","%_controls %time":"width:auto;margin-right:25px;","%_controls %progress":"min-width:105px;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;margin-right:19px;","%_controls %volume":"width:31px;min-width:31px;margin-right:10px;","%_controls%_has-audio %volume":"width:81px;min-width:50px;margin-right:20px;","%_controls %fullscreen":"width:24px;min-width:24px;",'%[data-element-query-width~="small"] %_controls %_control:first-child':"margin-left:13px;",'%[data-element-query-width~="small"] %_controls %_control:last-child':"margin-right:12px;",'%[data-element-query-width~="small"] %_controls %time':"display:none;",'%[data-element-query-width~="minimal"] %_controls%_has-audio %volume':"width:31px;min-width:31px;margin-right:10px;"}},"skins.viewer.mediaControlsLightSkin":{react:[["div","controls",["_controls"],{},["div","play",["_control"],{}],["div","time",["_control"],{}],["div","progress",["_control"],{}],["div","volume",["_control"],{}],["div","fullscreen",["_control"],{}]]],exports:{play:{skin:"skins.viewer.mediaControlPlayDefaultSkin"},volume:{skin:"skins.viewer.mediaControlVolumeDefaultSkin"},fullscreen:{skin:"skins.viewer.mediaControlFullscreenDefaultSkin"},progress:{skin:"skins.viewer.mediaControlProgressDefaultSkin"},time:{skin:"skins.viewer.mediaControlTimeDefaultSkin"}},css:{"%_controls":"width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;","%_controls %_control:first-child":"margin-left:21px;","%_controls %_control:last-child":"margin-right:20px;","%_controls %play":"width:24px;min-width:24px;margin-right:14px;","%_controls %time":"width:auto;margin-right:25px;","%_controls %progress":"min-width:105px;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;margin-right:19px;","%_controls %volume":"width:31px;min-width:31px;margin-right:10px;","%_controls%_has-audio %volume":"width:81px;min-width:50px;margin-right:20px;","%_controls %fullscreen":"width:24px;min-width:24px;",'%[data-element-query-width~="small"] %_controls %_control:first-child':"margin-left:13px;",'%[data-element-query-width~="small"] %_controls %_control:last-child':"margin-right:12px;",'%[data-element-query-width~="small"] %_controls %time':"display:none;",'%[data-element-query-width~="minimal"] %_controls%_has-audio %volume':"width:31px;min-width:31px;margin-right:10px;"}},"skins.viewer.mediaControlsNoControlsSkin":{react:[["div","controls",["_controls"],{},["div","volume",["_control"],{}]]],exports:{volume:{skin:"skins.viewer.mediaControlVolumeDefaultSkin"}},css:{"%":"pointer-events:none;","%_controls":"margin:0 10px 0 auto;width:31px;height:100%;","%_controls %_control":"pointer-events:auto;","%_controls %volume":"width:31px;min-width:31px;"}},"skins.viewer.mediaControlStoryboardDefaultSkin":{react:[["div",null,["_video-storyboard"],{},["video","video",["_media-preview"],{muted:"",preload:"auto"},["source","mediaSource",[],{type:"video/mp4"}]],["div","label",["_media-preview-caption"],{}]]],params:{maincolor:"COLOR"},paramsDefaults:{maincolor:"color_11"},css:{"%":"position:absolute;pointer-events:none;","%_video-storyboard":"margin-left:-50%;width:100%;height:100%;background-color:rgba(30, 30, 30, 0.9);box-sizing:border-box;border-radius:2px;overflow:hidden;padding:2px;","%_media-preview":"width:100%;height:100%;box-sizing:border-box;margin:0;padding:0;","%label":"position:absolute;bottom:5px;width:100%;text-align:center;padding:0;color:[maincolor];font-size:12px;text-shadow:0 1px 4px rgba(0, 0, 0, 0.2);"}},"skins.viewer.mediaControlStoryboardMinimalSkin":{react:[["div","backgroundSymbol",[],{},["div","icon",[],{}]],["div","label",["_media-preview-caption"],{}]],exports:{icon:{skin:"skins.viewer.VectorImageSkin"}},params:{textcolor:"COLOR"},paramsDefaults:{textcolor:"color_15"},css:{"%":"position:absolute;top:-10px;","%backgroundSymbol":"width:41px;height:20px;position:relative;","%backgroundSymbol > div":"width:100%;height:100%;","%label":"position:absolute;top:0;left:0;height:20px;line-height:20px;width:100%;text-align:center;color:[textcolor];font-size:12px;"}},"skins.viewer.mediaControlTimeDefaultSkin":{react:[["div","timeIndicator",[],{},["span","played",["_time-played"],{}],["span",null,["_divider"],{"aria-hidden":!0}],["span","total",["_total-time"],{}]]],params:{maincolor:"COLOR"},paramsDefaults:{maincolor:"color_11"},css:{"%timeIndicator":"display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;height:100%;font-size:12px;line-height:12px;color:[maincolor];text-shadow:0 1px 3px rgba(0, 0, 0, 0.4);","%timeIndicator %_divider::after":"content:'\\00a0/\\00a0';"}},"skins.viewer.mediaControlVolumeDefaultSkin":{react:[["div","volume",[],{},["div","mute",["_volume-mute"],{},["div","icon",[],{}]],["div","volumeBar",["_volume-control","_volume-bar"],{},["div","volumeBarIdle",["_volume-bar-part","_volume-bar-idle"],{}],["div","volumeBarActive",["_volume-bar-part","_volume-bar-active"],{}],["div","volumeBarDragArea",["_volume-bar-part","_volume-bar-drag-area"],{}]]]],exports:{icon:{skin:"skins.viewer.VectorImageSkin"}},params:{maincolor:"COLOR",progresscolor:"COLOR",disabledcolor:"COLOR"},paramsDefaults:{maincolor:"#fff",progresscolor:"#1fdf67",disabledcolor:"#777"},css:{"%volume":"width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;","%volume %_volume-mute":"height:100%;width:31px;margin-right:2px;cursor:pointer;position:relative;","%volume %_volume-mute > div":"width:100%;height:100%;","%volume %_volume-bar":"-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;position:relative;","%volume %_volume-bar %_volume-bar-part":"top:50%;width:100%;height:2px;margin-top:-1px;position:absolute;left:0;","%volume %_volume-bar %_volume-bar-idle":"background:[maincolor];border-radius:1px;box-shadow:0 1px 3px 0 rgba(0, 0, 0, 0.3);","%volume %_volume-bar %_volume-bar-active":"pointer-events:none;width:0;background:[progresscolor];border-radius:1px;","%volume %_volume-bar %_volume-bar-drag-area":"height:24px;margin-top:-12px;cursor:pointer;","%volume%_muted %_volume-bar-drag-area":"cursor:default;","%volume%_muted %_volume-bar-active":"background:[disabledcolor];","%volume%_disabled %_volume-mute":"cursor:default;"}},"skins.viewer.mediaOverlayControlsDefaultSkin":{react:[["div","indicator",[],{}],["div","catcher",[],{}]],exports:{indicator:{skin:"skins.viewer.VectorImageSkin"}},css:{"%catcher":"position:absolute;top:0;right:0;bottom:0;left:0;","%_indicator":"position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;","%_interactive-player":"cursor:pointer;"}}};return e})?i.apply(t,r):i)||(e.exports=s)},921:function(e,t,o){var i,r;i=[o(3),o(0),o(1)],void 0===(r=function(e,t,o){"use strict";function i(e,i){var r=t.get(i,["design","icons"]),s=t.map(r,function(t){return function(e,t){return o.svg.createSvgFetchRequest(e.serviceTopology.mediaRootUrl,e,t)}(e,t.svgId)});return t.compact(s)}e.dataRequirementsCheckerRegistrar.registerCheckerForCompType("wysiwyg.viewer.components.MediaOverlayControls",i),e.dataRequirementsCheckerRegistrar.registerCheckerForCompType("wysiwyg.viewer.components.MediaControls",i)}.apply(t,i))||(e.exports=r)}})});
//# sourceMappingURL=mediaControls.min.js.map